
   /* variables
   ================================ */
:root{
  --accent: #ff9800;
  --bg-card: rgba(255,255,255,0.12);
  --popup-bg: rgba(0,0,0,0.85);
  --text: #fff;
  --radius: 12px;

  --menu-home:#2563eb;  --menu-home-h:#1d4ed8;
  --menu-shop:#16a34a;  --menu-shop-h:#15803d;
  --menu-param:#14b8a6; --menu-param-h:#0d9488;

  --cat-ebooks: #3b82f6;
  --cat-apps:   #8b5cf6;
  --cat-videos: #ef4444;

  --cat-vip:   #eab308; /* amber */
  --cat-promo: #22c55e; /* green */
  --cat-free:  #3b82f6; /* blue */

  /* Haben'ny menu ambany ho an'ny home fixe */
  --bm-space: 96px;
}

/* ================================
   Theme variants (override for theme switch)
   ================================ */
body.theme-dark 
body.theme-light {
  --bg-card: rgba(255,255,255,0.95);
  --popup-bg: rgba(255,255,255,0.95);
  --text: #111;
  --accent: #ff9800;
  --menu-home: #2563eb; --menu-home-h: #1d4ed8;
  --menu-shop: #16a34a; --menu-shop-h: #15803d;
}
body.theme-jaune {
  --accent: #f59e0b;
  --bg-card: rgba(255,243,205,0.14);
  --popup-bg: rgba(15,12,8,0.92);
  --text: #fff;
  --menu-home: #b45309; --menu-home-h: #92400e;
  --menu-shop: #b45309; --menu-shop-h: #92400e;
}
body.theme-rose {
  --accent: #fb7185;
  --bg-card: rgba(251,113,133,0.09);
  --popup-bg: rgba(10,6,10,0.88);
  --text: #fff;
}
body.theme-marron {
  --accent: #8b5e3c;
  --bg-card: rgba(139,94,60,0.12);
  --popup-bg: rgba(10,6,10,0.85);
  --text: #fff;
}

/* ================================
   Reset / Global
   ================================ */
*{box-sizing:border-box;margin:0;padding:0}
html,body{height:100%}
body{
  font-family:'Montserrat',sans-serif;
  color:var(--text);
  background:url("https://i.ibb.co/F4sjXGCN/images-21.jpg") no-repeat center center fixed;
  background-size:cover;
  -webkit-font-smoothing:antialiased;
  transition: background-color .6s ease;
  overflow-x:hidden;
}

/* ================================
   Loader
   ================================ */
#loader{
  position:fixed;inset:0;display:flex;flex-direction:column;justify-content:center;align-items:center;
  background:linear-gradient(135deg,#1e88e5,#64b5f6);z-index:9999;transition:opacity .6s;
}
#loader.fade-out{opacity:0;visibility:hidden;pointer-events:none}
#loader[aria-hidden="true"]{display:none !important;opacity:0 !important;visibility:hidden !important;pointer-events:none !important;}
.loader-logo{width:92px;height:92px;border-radius:50%;object-fit:cover;margin-bottom:16px;box-shadow:0 8px 30px rgba(0,0,0,.35)}
.loader-text{font-weight:800;font-size:28px;background:linear-gradient(90deg,#ffd700,#fff);-webkit-background-clip:text;-webkit-text-fill-color:transparent}

/* ================================
   Sections
   ================================ */
section{
  position:relative; z-index:1;
  max-width:980px;margin:48px auto;padding:48px;border-radius:var(--radius);
  background:var(--bg-card); backdrop-filter: blur(6px);
  box-shadow:0 6px 30px rgba(0,0,0,.45);
  display:none;
  opacity:0;
  transition:opacity .45s;
  content-visibility:auto; contain-intrinsic-size:800px 600px;
}
section.active{display:block; opacity:1}
h1,h2{font-size:28px;margin-bottom:8px}
p{color:#eee;line-height:1.5}

/* ================================
   Slideshow
   ================================ */
.slideshow{position:relative;width:100%;max-height:320px;margin-bottom:16px;overflow:hidden;border-radius:12px;aspect-ratio:16/9}
.slide-track{display:flex;width:100%;height:100%;transition:transform .6s ease;will-change:transform}
.slide{min-width:100%;height:100%}
.slide img{width:100%;height:100%;object-fit:cover}
.slide-dots{position:absolute;left:50%;bottom:10px;transform:translateX(-50%);display:flex;gap:8px}
.dot{width:10px;height:10px;border-radius:999px;background:rgba(255,255,255,.5);border:0}
.dot.active{background:#fff}

/* ================================
   Popup (shop)
   ================================ */
#shop-popup{
  position:fixed;inset:0;display:flex;flex-direction:column;align-items:center;padding:70px 18px 24px;
  background:var(--popup-bg); z-index:2200; opacity:0; pointer-events:none; transform:scale(.98); transition:all .28s ease;
  overflow:auto;
}
#shop-popup.show{opacity:1; pointer-events:auto; transform:scale(1)}
.close-popup{position:absolute;right:18px;top:18px;background:rgba(255,255,255,.9);color:#000;border:none;padding:10px;border-radius:999px;cursor:pointer}

/* ================================
   Filters
   ================================ */
.filters{display:flex;gap:8px;flex-wrap:wrap;justify-content:center;margin-bottom:8px}
.filter-btn{
  border:1px solid rgba(255,255,255,.06);
  color:#fff;padding:8px 12px;border-radius:8px;cursor:pointer;
  transition: background .18s ease, transform .12s ease, border-color .18s ease, color .18s ease;
  background: rgba(255,255,255,0.02);
}
.filter-btn.active{ box-shadow: 0 8px 24px rgba(0,0,0,.35); transform: translateY(-2px) }

/* ================================
   Products (vertical grid, mobile-first)
   ================================ */
.products-section {
  margin-top:18px;
  padding-bottom:80px;
}
.products-row{
  display:grid !important;
  grid-template-columns: 1fr;
  gap:14px;
  padding-bottom:0;
  overflow:visible !important;
  -webkit-overflow-scrolling:auto;
  scroll-behavior:auto;
  scroll-snap-type:unset;
  scroll-padding:0;
  overscroll-behavior-x:auto;
  cursor:default;
  white-space:normal;
}
.products-row::-webkit-scrollbar,
.products-row::-webkit-scrollbar-thumb{height:0;background:transparent}

/* Card base */
.products-row .product-card{
  min-width:0 !important;
  width:100%;
  max-width:none !important;
  flex:initial !important;
  display:flex;
  flex-direction:column;
  justify-content:space-between;
  background:var(--bg-card);
  border:1px solid rgba(255,255,255,.08);
  border-radius:var(--radius);
  box-shadow:0 1px 2px rgba(0,0,0,.2), 0 6px 18px rgba(0,0,0,.18);
  overflow:hidden;
  scroll-snap-align:none;
}
.product-card img{
  width:100%;
  height:auto;
  aspect-ratio:16/9;
  object-fit:cover;
}
.product-price{font-weight:900;font-size:16px;margin-top:6px}

@media (min-width: 640px){
  .products-row{ grid-template-columns: repeat(2, minmax(0, 1fr)); }
}
@media (min-width: 1024px){
  .products-row{ grid-template-columns: repeat(3, minmax(0, 1fr)); }
}

.products-grid{
  display:grid;
  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
  gap:12px;
}

/* ================================
   Badges stylés
   ================================ */
.badge{
  display:inline-flex;align-items:center;gap:6px;padding:6px 8px;border-radius:999px;font-size:12px;
  background: rgba(255,255,255,.06); border:1px solid rgba(255,255,255,.08);
}
.badge i{font-size:12px}
.badge-ebooks{ background-color: rgba(59,130,246,0.08); border-color: rgba(59,130,246,0.16); }
.badge-videos{ background-color: rgba(239,68,68,0.08); border-color: rgba(239,68,68,0.16); }
.badge-vip{ background: rgba(234,179,8,.18); border-color: rgba(234,179,8,.36); color:#fff;}
.badge-promo{ background: rgba(34,197,94,.18); border-color: rgba(34,197,94,.36); color:#fff;}
.badge-free{ background: rgba(59,130,246,.18); border-color: rgba(59,130,246,.36); color:#fff;}
@supports (color: color-mix(in srgb, black 10%, white 90%)) {
  .badge-ebooks{ background: color-mix(in srgb, var(--cat-ebooks) 20%, transparent); border-color: color-mix(in srgb, var(--cat-ebooks) 30%, transparent); }
  .badge-videos{ background: color-mix(in srgb, var(--cat-videos) 20%, transparent); border-color: color-mix(in srgb, var(--cat-videos) 30%, transparent); }
}

/* ================================
   Icon buttons (info/buy) + Patch look in cards
   ================================ */
.icon-btn{
  width:34px;height:34px;display:inline-flex;align-items:center;justify-content:center;
  border-radius:10px;border:1px solid rgba(255,255,255,.08);background:rgba(255,255,255,.06);color:var(--text);cursor:pointer;
  transition: transform .12s ease, box-shadow .2s ease, background .2s ease, border-color .2s ease;
}
.icon-btn:active{ transform: translateY(0) }
.icon-buy{ background: rgba(34,197,94,.16); border-color: rgba(34,197,94,.3); }
.icon-info{ background: rgba(255,255,255,.06); }

/* Product-card icons */
.product-card .icon-btn{
  width: 38px; height: 38px; border-radius: 12px;
  border: 1px solid rgba(255,255,255,.10);
  background: rgba(255,255,255,.06);
  color: #fff;
  display: inline-flex; align-items: center; justify-content: center;
  transition: transform .12s ease, box-shadow .2s ease, background .2s ease, border-color .2s ease, filter .2s ease;
}
.product-card .icon-btn i{ font-size: 16px; line-height: 1; }
.product-card .icon-buy{
  background: rgba(37,211,102,.18); border-color: rgba(37,211,102,.38); color: #eafff2;
}
.product-card .icon-buy:hover{
  background: rgba(37,211,102,.28); border-color: rgba(37,211,102,.55); filter: brightness(1.05);
}
.product-card .icon-info{
  background: rgba(255,255,255,.07); border-color: rgba(255,255,255,.12);
}
.product-card .icon-info:hover{
  background: rgba(255,255,255,.12); border-color: rgba(255,255,255,.22);
}
.product-card .icon-btn + .icon-btn{ margin-left: 8px; }
.product-card .product-price{ white-space: nowrap; }
.product-card .meta, .product-card .product-meta{ gap: 10px; }
@media (max-width: 420px){
  .product-card .icon-btn{ width: 40px; height: 40px; border-radius: 12px; }
  .product-card h3{ font-size: 14px; }
}
.product-card .card-actions{
  display: inline-flex; align-items: center; gap: 10px; flex-wrap: nowrap;
}

/* ================================
   Like/heart + burst effect
   ================================ */
.icon-like{
  position:relative;color:#fff;background:rgba(255,255,255,.06);
  border:1px solid rgba(255,255,255,.08); width:34px;height:34px;
  display:inline-flex;align-items:center;justify-content:center;border-radius:10px;cursor:pointer;
}
.icon-like.liked{ color:#ef4444; background: rgba(239,68,68,.18); border-color: rgba(239,68,68,.4); }
.icon-like.burst::after{
  content:""; position:absolute; inset:0; border-radius:12px;
  box-shadow: 0 -14px 0 -8px #ef4444, 14px 0 0 -8px #f59e0b, 0 14px 0 -8px #10b981, -14px 0 0 -8px #3b82f6;
  animation: burst .45s ease-out;
}
@keyframes burst{
  0%{ transform:scale(.6); opacity:.9 }
  80%{ transform:scale(1.4); opacity:.2 }
  100%{ transform:scale(1.6); opacity:0 }
}

/* ================================
   Cart panel (top-right)
   ================================ */
#cart-panel{
  position:fixed;right:14px;top:14px;background:rgba(0,0,0,.6);padding:8px 12px;border-radius:10px;z-index:1500;display:flex;gap:10px;align-items:center
}
#cart-panel button{background:transparent;border:0;color:#fff;cursor:pointer}

/* ================================
   Cart drawer (modern)
   ================================ */
#cart-drawer{
  position: fixed; right: 12px; bottom: 64px;
  width: min(360px, 92vw); max-height: 70vh; overflow:auto;
  background: var(--popup-bg); color: var(--text);
  border-radius: 12px; padding: 12px; z-index: 1600;
  box-shadow: 0 18px 60px rgba(0,0,0,.55);
  transform: translateY(12px); opacity:0; pointer-events:none; transition: transform .18s, opacity .18s;
}
#cart-drawer.show{ transform: translateY(0); opacity:1; pointer-events:auto; }
.cart-item{ display:grid; grid-template-columns:56px 1fr auto; gap:10px; align-items:center; padding:8px; border-radius:10px;
  background: rgba(255,255,255,.04); border:1px solid rgba(255,255,255,.06); }
.cart-item img{ width:56px; height:56px; object-fit:cover; border-radius:8px; }
.cart-item h4{ font-size:14px; margin:0; color:var(--text);}
.cart-item .qty{ display:flex; align-items:center; gap:6px; margin-top:6px;}
.cart-item .qty button{ width:26px; height:26px; border-radius:6px; border:1px solid rgba(255,255,255,.12); background:rgba(255,255,255,.06); color:var(--text); cursor:pointer; }
.cart-footer{ display:flex; justify-content:space-between; align-items:center; padding-top:10px; border-top:1px dashed rgba(255,255,255,.18); margin-top:10px; }
.cart-empty{ color:#ddd; padding:10px; text-align:center; }

/* ================================
   Bottom menu (z-index surélevé + cliquable)
   ================================ */
.bottom-menu{
  position:fixed;left:50%;transform:translateX(-50%);
  bottom:12px;display:flex;gap:12px;
  background:rgba(15,23,42,.65);
  padding:10px 14px;border-radius:28px;
  z-index:3200;
  backdrop-filter: blur(6px);
  pointer-events:auto;
}
.menu-btn{
  background:none;border:0;color:#fff;
  display:flex;flex-direction:column;align-items:center;gap:4px;
  padding:8px 10px;border-radius:12px;cursor:pointer;min-width:84px;
  transition: background .18s ease, transform .12s ease, box-shadow .2s ease;
  box-shadow: 0 6px 18px rgba(0,0,0,.22);
}
.menu-btn i{font-size:18px}
.menu-home{ background:var(--menu-home) }
.menu-shop{ background:var(--menu-shop) }
.menu-param{ background:var(--menu-param) }
.menu-home:hover{ background:var(--menu-home-h); transform: translateY(-1px) }
.menu-shop:hover{ background:var(--menu-shop-h); transform: translateY(-1px) }
.menu-param:hover{ background:var(--menu-param-h); transform: translateY(-1px) }
.menu-btn:active{ transform: translateY(0) }
.menu-btn.active{
  outline: 2px solid rgba(255,255,255,.5);
  outline-offset: 2px;
  box-shadow: 0 10px 24px rgba(0,0,0,.28), 0 0 0 4px rgba(255,255,255,.12) inset;
}
@keyframes pulseOnce {
  0% { transform: scale(1); box-shadow: 0 0 0 rgba(255,255,255,0); }
  40% { transform: scale(1.06); box-shadow: 0 0 0 8px rgba(255,255,255,0.18); }
  100% { transform: scale(1); box-shadow: 0 0 0 rgba(255,255,255,0); }
}
.menu-shop.pulse { animation: pulseOnce .45s ease-out; }

/* ================================
   Param fixed (right)
   ================================ */
#param-fixed{
  position:fixed; right:12px; bottom:100px; width:300px; max-width:92%;
  background:var(--popup-bg); padding:12px;border-radius:12px; z-index:2400; color:var(--text);
  box-shadow:0 12px 40px rgba(0,0,0,.6);
  display:flex;flex-direction:column;gap:10px;align-items:stretch;
  transition:transform .18s,opacity .18s;
  max-height:70vh; overflow:auto; pointer-events:auto;
}
#param-fixed.hidden{transform:translateY(18px);opacity:0;pointer-events:none}
#param-fixed .row{display:flex;gap:8px;align-items:center}
#param-fixed h4{margin:10px 0 6px 0;font-size:14px}

.param-btn{padding:8px 10px;border-radius:8px;border:1px solid rgba(255,255,255,.06);background:rgba(255,255,255,.03);color:var(--text);cursor:pointer}
.param-select{display:flex;flex-direction:column;gap:6px}

/* ================================
   Option cards (Langue / Thème)
   ================================ */
.option-grid{ display:grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap:10px; }
.option-card{
  display:flex; align-items:center; gap:10px;
  background: rgba(255,255,255,.06);
  border:1px solid rgba(255,255,255,.08);
  border-radius:12px; padding:10px 12px; cursor:pointer;
  transition: transform .12s ease, box-shadow .2s ease, border-color .2s ease, background .2s ease;
  position:relative; color:var(--text);
}
.option-card:hover{ transform: translateY(-1px); box-shadow: 0 10px 24px rgba(0,0,0,.28); }
.option-card.active{ border-color: rgba(255,255,255,.35); box-shadow: 0 10px 28px rgba(0,0,0,.35), 0 0 0 2px rgba(255,255,255,.18) inset; }

.option-icon{
  width:38px; height:38px; border-radius:999px;
  display:flex; align-items:center; justify-content:center;
  color:#fff; font-size:18px; flex:0 0 auto;
  box-shadow: inset 0 -2px 8px rgba(0,0,0,.25);
}
.option-texts{ display:flex; flex-direction:column; text-align:left }
.option-title{ font-weight:800; font-size:14px; line-height:1.1 }
.option-sub{ font-size:12px; opacity:.9 }

.option-card.active::after{
  content: "\f00c";
  font-family: "Font Awesome 6 Free"; font-weight:900;
  position:absolute; right:8px; top:8px; font-size:12px;
  color:#10b981;
  background: rgba(16,185,129,.14);
  border:1px solid rgba(16,185,129,.35);
  width:20px; height:20px; border-radius:999px;
  display:flex; align-items:center; justify-content:center;
}

/* Icons for language/theme chips */
.icon-mg{ background: linear-gradient(135deg,#ef4444,#22c55e) }
.icon-fr{ background: linear-gradient(135deg,#2563eb,#ef4444) }
.icon-en{ background: linear-gradient(135deg,#111827,#3b82f6) }
.icon-dark{ background: linear-gradient(135deg,#0f172a,#334155) }
.icon-light{ background: linear-gradient(135deg,#f59e0b,#fde68a); color:#111 }

/* ================================
   Modals (Quit / Info)
   ================================ */
#quit-modal,#info-modal{
  position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,.6);z-index:3000;opacity:0;pointer-events:none;
  transition: opacity .18s ease; will-change:opacity;
}
#quit-modal.show,#info-modal.show{opacity:1;pointer-events:auto}
.modal-card{background:var(--bg-card);padding:18px;border-radius:12px;max-width:420px;text-align:center;backdrop-filter: blur(4px)}
.info-card{background:var(--bg-card);padding:18px;border-radius:12px;max-width:520px;backdrop-filter: blur(4px)}
.info-card h3{margin-bottom:8px}
.info-actions{display:flex;justify-content:flex-end;gap:8px;margin-top:10px}

/* ================================
   Focus rings (accessibility)
   ================================ */
.menu-btn:focus-visible,
.page-btn:focus-visible,
.filter-btn:focus-visible,
.param-btn:focus-visible,
.close-popup:focus-visible,
.dot:focus-visible{
  outline:3px solid #fff; outline-offset:3px;
}

/* ================================
   Screen reader only
   ================================ */
.sr-only{
  position:absolute !important;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0;
}

/* ================================
   Reduced motion
   ================================ */
@media (prefers-reduced-motion: reduce){
  *,*::before,*::after{
    animation-duration:.001ms !important;
    animation-iteration-count:1 !important;
    transition-duration:.001ms !important;
    scroll-behavior:auto !important;
  }
}

/* ================================
   Mobile optimisations
   ================================ */
@media(max-width:720px){
  #products-box{grid-template-columns:repeat(auto-fit,minmax(160px,1fr))}
  #param-fixed{right:8px;left:8px;width:auto}
  .products-row .product-card{
    min-width: 0 !important;
    width: 100%;
  }
}
@media (max-width:480px){
  body{ background-attachment:scroll }
  .bottom-menu{ backdrop-filter:none; background:rgba(15,23,42,.85) }
  #param-fixed{ background: rgba(0,0,0,.82); backdrop-filter:none }
  .modal-card,.info-card{ backdrop-filter:none; background: rgba(0,0,0,.7); }
}

/* ================================
   HOME fixe (tsy scroll) + slideshow cover
   ================================ */
#home.home-fixed{
  display: flex;
  flex-direction: column;
  height: calc(var(--vh, 1vh) * 100 - var(--bm-space));
  margin: 12px auto;
  padding: 12px;
  overflow: hidden;
  background: var(--bg-card);
  border-radius: var(--radius);
  box-shadow: 0 6px 18px rgba(0,0,0,.35);
}
#home.home-fixed .slideshow{
  flex: 1 1 auto;
  min-height: 0;
  height: auto;
  max-height: none;
}
#home.home-fixed .slide-track,
#home.home-fixed .slide{
  height: 100%;
}
#home.home-fixed .slide img{
  width: 100%;
  height: 100%;
  object-fit: cover;
  object-position: center center;
  aspect-ratio: auto;
}
@media (max-width: 480px){
  #home.home-fixed h1 { font-size: 22px; }
  #home.home-fixed p  { font-size: 13px; }
}

/* ================================
   PATCHES MERGE — Shop scroll + disabled states
   ================================ */

/* Shop: cards ihany no miscroll, background body mijanona fixe */
#shop{
  display:flex;
  flex-direction:column;
  min-height: calc(var(--vh, 1vh) * 100 - 24px);
}
#shop h2,
#shop .shop-header,
#shop .filters{
  flex: 0 0 auto;
}
#shop .products-section{
  flex: 1 1 auto;
  max-height: calc(var(--vh, 1vh) * 100 - 220px); /* amboary raha ilaina arakaraka ny header/filters */
  overflow: auto;
  padding-right: 6px;
}

/* Guard double scroll rehefa eo amin'ny Shop */
body.shop-active{ overflow: hidden; }

/* Disabled styles for tools/buttons (public sees but cannot use) */
.param-btn[disabled], .icon-btn[disabled]{
  opacity:.45;
  cursor:not-allowed;
}

/* Optional: visual hover consistency */
.icon-btn:hover{
  border-color: rgba(255,255,255,.18);
  background: rgba(255,255,255,.10);
}

#product-modal{
  position:fixed; inset:0;
  display:flex; align-items:center; justify-content:center;
  background:rgba(0,0,0,.6); z-index:3000;
  opacity:0; pointer-events:none; transition: opacity .18s ease;
}
#product-modal.show{ opacity:1; pointer-events:auto; }
#product-modal .info-card{ max-width:680px; width:92vw; }

.form-grid{
  display:grid; gap:10px; grid-template-columns: 1fr 1fr;
  margin: 8px 0 12px;
}
.form-grid .full{ grid-column: 1 / -1; }
.form-grid label{ display:flex; flex-direction:column; gap:6px; color:var(--text); }
.form-grid input, .form-grid select{
  background: rgba(255,255,255,.06);
  border:1px solid rgba(255,255,255,.12);
  color: var(--text);
  border-radius: 8px;
  padding: 10px;
  outline: none;
}
.form-grid input::placeholder{ color: #cbd5e1; }

#shop{
  /* Overlay maizina + sary */
  background:
    linear-gradient(to bottom, rgba(0,0,0,0.25), rgba(0,0,0,0.55)),
    url("https://i.ibb.co/rGwjX7y5/images-22.jpg") center/cover no-repeat;
  border-radius: var(--radius);
  /* Raha tianao tsy hifindra ny sary rehefa scroll: esory ity manaraka ity */
  background-attachment: scroll; /* na 'fixed' raha te fixe ao anaty section */
}

/* Cards zone (scrollable) dia avela ho transparent mba hijery ilay background ao ambadika */
#shop .products-section{
  background: transparent;
}

/* Hamafiso contraste amin'ny Filters */
#shop .filters .filter-btn{
  background: rgba(8, 12, 20, 0.55);
  border-color: rgba(255,255,255,0.18);
  color: #f8fafc;
}
#shop .filters .filter-btn:hover{
  background: rgba(8, 12, 20, 0.7);
  border-color: rgba(255,255,255,0.28);
}
#shop .filters .filter-btn.active{
  background: rgba(8, 12, 20, 0.78);
  border-color: rgba(255,255,255,0.38);
  box-shadow: 0 8px 24px rgba(0,0,0,.45);
}

/* Hamafiso contraste amin'ny cards sy texte anatiny */
#shop .product-card{
  background: rgba(10, 12, 16, 0.82);
  border-color: rgba(255,255,255,0.12);
}
#shop .product-card h3{ color:#fff; }
#shop .product-card .desc{ color:#e5e7eb; }
#shop .product-card .product-price{ color:#fff; }

/* Hamafiso ihany koa ny “Nos Produits Numériques” header */
#shop h2{
  color: #fff;
  text-shadow: 0 2px 8px rgba(0,0,0,.45);
}

/* Raha theme-light no ampiasaina dia asio override kely hanajanonana contraste */
body.theme-light #shop{
  background:
    linear-gradient(to bottom, rgba(0,0,0,0.25), rgba(0,0,0,0.55)),
    url("https://i.ibb.co/rGwjX7y5/images-22.jpg") center/cover no-repeat;
}
body.theme-light #shop .product-card{
  background: rgba(255,255,255,0.92);
  color: #111;
}
body.theme-light #shop .product-card .desc{ color:#334155; }
body.theme-light #shop .filters .filter-btn{
  background: rgba(255,255,255,0.85);
  color:#111;
  border-color: rgba(0,0,0,0.08);
}
body.theme-light #shop .filters .filter-btn.active{
  background: rgba(255,255,255,0.95);
  border-color: rgba(0,0,0,0.18);
}

/* Mobile tweaks: Hamarino ny legibility amin'ny écran kely */
@media (max-width: 480px){
  #shop{
    background:
      linear-gradient(to bottom, rgba(0,0,0,0.28), rgba(0,0,0,0.58)),
      url("https://i.ibb.co/rGwjX7y5/images-22.jpg") center/cover no-repeat;
  }
  #shop .filters .filter-btn{ padding:8px 10px; }
}
/* ===== Modal Preview Fade Effects ===== */
#info-modal {
  opacity: 0;
  visibility: hidden;
  transition: opacity 0.2s ease, visibility 0.2s ease;
}
#info-modal.show {
  opacity: 1;
  visibility: visible;
}
#info-modal.fade-in {
  animation: modalFadeIn 0.2s ease forwards;
}
#info-modal.fade-out {
  animation: modalFadeOut 0.2s ease forwards;
}

@keyframes modalFadeIn {
  from { opacity: 0; transform: scale(0.96); }
  to { opacity: 1; transform: scale(1); }
}
@keyframes modalFadeOut {
  from { opacity: 1; transform: scale(1); }
  to { opacity: 0; transform: scale(0.96); }
}/* ===== Frosted Glass Backdrop for Modal ===== */
#info-modal {
  position: fixed;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(10, 10, 10, 0.55); /* semi-transparent dark layer */
  backdrop-filter: blur(8px) saturate(160%);
  -webkit-backdrop-filter: blur(8px) saturate(160%);
  z-index: 1000;
  transition: opacity 0.25s ease, visibility 0.25s ease;
  opacity: 0;
  visibility: hidden;
}

/* Show state */
#info-modal.show {
  opacity: 1;
  visibility: visible;
}

/* Modal content styling (optional enhancement) */
#info-modal .info-container {
  background: rgba(30, 30, 30, 0.75);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  border-radius: 14px;
  box-shadow: 0 8px 24px rgba(0,0,0,0.35);
  border: 1px solid rgba(255,255,255,0.08);
  max-width: 90%;
  width: 600px;
  padding: 1rem;
  color: #fff;
  transition: transform 0.25s ease;
}

/* Fade effects from earlier */
#info-modal.fade-in {
  animation: modalFadeIn 0.2s ease forwards;
}
#info-modal.fade-out {
  animation: modalFadeOut 0.2s ease forwards;
}

@keyframes modalFadeIn {
  from { opacity: 0; transform: scale(0.96); }
  to { opacity: 1; transform: scale(1); }
}
@keyframes modalFadeOut {
  from { opacity: 1; transform: scale(1); }
  to { opacity: 0; transform: scale(0.96); }
}#shop .search {
  position: relative;
  margin: 10px 0 14px;
}

#shop .search #search {
  width: 100%;
  height: 44px;
  padding: 10px 14px 10px 40px; /* toerana ho an'ny icon ankavia */
  border: 1px solid rgba(0,0,0,0.08);
  background-color: #fff;
  color: #222;
  border-radius: 999px;
  outline: none;
  font-size: 14px;
  transition: border-color .2s ease, box-shadow .2s ease, background-color .2s ease;
  box-shadow: 0 1px 2px rgba(0,0,0,.04);
}

/* Icon loupe amin'ny background (tsy mila manova HTML) */
#shop .search #search {
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='18' height='18' viewBox='0 0 24 24' fill='none' stroke='%23909aa3' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Ccircle cx='11' cy='11' r='8'/%3E%3Cpath d='m21 21-4.3-4.3'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: 12px center;
  background-size: 18px 18px;
}

/* Focus state: ring manify sy border miloko */
#shop .search #search:focus {
  border-color: #3b82f6;
  box-shadow: 0 0 0 3px rgba(59,130,246,.18);
}

/* Placeholder malefaka */
#shop .search #search::placeholder {
  color: #97a1ab;
}

/* Hover kely */
#shop .search #search:hover {
  border-color: rgba(0,0,0,0.12);
}

/* ===== Dark mode support (raha manana theme dark ianao) ===== */
@media (prefers-color-scheme: dark) {
  #shop .search #search {
    background-color: #14161a;
    border-color: rgba(255,255,255,0.08);
    color: #e6e6e6;
    box-shadow: 0 1px 2px rgba(0,0,0,.6);
  }
  #shop .search #search {
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='18' height='18' viewBox='0 0 24 24' fill='none' stroke='%23a6b0bb' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Ccircle cx='11' cy='11' r='8'/%3E%3Cpath d='m21 21-4.3-4.3'/%3E%3C/svg%3E");
  }
  #shop .search #search:focus {
    border-color: #60a5fa;
    box-shadow: 0 0 0 3px rgba(96,165,250,.18);
  }
  #shop .search #search::placeholder {
    color: #8c96a3;
  }
}

/* Raha mampiasa data-theme='dark' ianao amin'ny <body> na wrapper */
body[data-theme="dark"] #shop .search #search {
  background-color: #14161a;
  border-color: rgba(255,255,255,0.08);
  color: #e6e6e6;
  box-shadow: 0 1px 2px rgba(0,0,0,.6);
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='18' height='18' viewBox='0 0 24 24' fill='none' stroke='%23a6b0bb' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Ccircle cx='11' cy='11' r='8'/%3E%3Cpath d='m21 21-4.3-4.3'/%3E%3C/svg%3E");
}
body[data-theme="dark"] #shop .search #search:focus {
  border-color: #60a5fa;
  box-shadow: 0 0 0 3px rgba(96,165,250,.18);
}
body[data-theme="dark"] #shop .search #search::placeholder {
  color: #8c96a3;
}

/* ===== Accessibility and mobile tweaks ===== */
#shop .search #search::-webkit-search-cancel-button {
  -webkit-appearance: none;
  height: 14px;
  width: 14px;
  border-radius: 50%;
  background: radial-gradient(circle at center, #9aa5b1 50%, transparent 51%);
  cursor: pointer;
  margin-right: 6px;
}

@media (max-width: 420px) {
  #shop .search #search {
    height: 40px;
    font-size: 13px;
  }
}

/* ===== Optional: style mitovy ho an'ny popup search koa ===== */
#shop-popup .search {
  position: relative;
  margin: 8px 0 12px;
}
#shop-popup .search #search-popup {
  width: 100%;
  height: 42px;
  padding: 10px 14px 10px 40px;
  border: 1px solid rgba(0,0,0,0.08);
  background-color: #fff;
  color: #222;
  border-radius: 10px;
  outline: none;
  font-size: 14px;
  transition: border-color .2s ease, box-shadow .2s ease, background-color .2s ease;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='18' height='18' viewBox='0 0 24 24' fill='none' stroke='%23909aa3' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Ccircle cx='11' cy='11' r='8'/%3E%3Cpath d='m21 21-4.3-4.3'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: 12px center;
  background-size: 18px 18px;
}
#shop-popup .search #search-popup:focus {
  border-color: #3b82f6;
  box-shadow: 0 0 0 3px rgba(59,130,246,.18);
}
@media (prefers-color-scheme: dark) {
  #shop-popup .search #search-popup {
    background-color: #14161a;
    border-color: rgba(255,255,255,0.08);
    color: #e6e6e6;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='18' height='18' viewBox='0 0 24 24' fill='none' stroke='%23a6b0bb' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Ccircle cx='11' cy='11' r='8'/%3E%3Cpath d='m21 21-4.3-4.3'/%3E%3C/svg%3E");
  }
}
body[data-theme="dark"] #shop-popup .search #search-popup {
  background-color: #14161a;
  border-color: rgba(255,255,255,0.08);
  color: #e6e6e6;
}

.bottom-menu {
  position: fixed;
  left: 0; right: 0; bottom: 0;
  transform: translateY(0);
  transition: transform .25s ease;
  will-change: transform;
  z-index: 50;
}


  /* Variables & Utils
===================================================== */
:root {
  --edge-visible: 18px;    /* Hauteur visible du grabber quand le menu est caché */
  --ring: #3b82f6;         /* Couleur principale du focus ring */
  --ring-dark: #60a5fa;    /* Focus en dark */
  --text: #222;
  --text-muted: #97a1ab;
  --bg: #fff;
  --border: rgba(0,0,0,0.08);
  --border-hover: rgba(0,0,0,0.12);
  --shadow: 0 1px 2px rgba(0,0,0,.04);
  --bg-dark: #14161a;
  --text-dark: #e6e6e6;
  --border-dark: rgba(255,255,255,0.08);
  --shadow-dark: 0 1px 2px rgba(0,0,0,.6);
}

/* Visually hidden but accessible (pour <label class="sr-only">) */
.sr-only,
.visually-hidden {
  position: absolute !important;
  width: 1px; height: 1px;
  margin: -1px; padding: 0;
  overflow: hidden; clip: rect(0 0 0 0);
  white-space: nowrap; border: 0;
}

/* =====================================================
   Search bar - SHOP
===================================================== */
#shop .search {
  position: relative;
  margin: 10px 0 14px;
}

#shop .search #search {
  width: 100%;
  height: 44px;
  padding: 10px 14px 10px 40px; /* place pour l’icône */
  border: 1px solid var(--border);
  background-color: var(--bg);
  color: var(--text);
  border-radius: 999px;
  outline: none;
  font-size: 14px;
  transition: border-color .2s ease, box-shadow .2s ease, background-color .2s ease;
  box-shadow: var(--shadow);
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='18' height='18' viewBox='0 0 24 24' fill='none' stroke='%23909aa3' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Ccircle cx='11' cy='11' r='8'/%3E%3Cpath d='m21 21-4.3-4.3'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: 12px center;
  background-size: 18px 18px;
}

#shop .search #search::placeholder {
  color: var(--text-muted);
}

#shop .search #search:hover {
  border-color: var(--border-hover);
}

#shop .search #search:focus {
  border-color: var(--ring);
  box-shadow: 0 0 0 3px color-mix(in srgb, var(--ring) 18%, transparent);
}

/* iOS clear button override (optionnel) */
#shop .search #search::-webkit-search-cancel-button {
  -webkit-appearance: none;
  height: 14px; width: 14px;
  border-radius: 50%;
  background: radial-gradient(circle at center, #9aa5b1 50%, transparent 51%);
  cursor: pointer;
  margin-right: 6px;
}

/* Mobile tweaks */
@media (max-width: 420px) {
  #shop .search #search {
    height: 40px;
    font-size: 13px;
  }
}

/* =====================================================
   Search bar - POPUP (optionnel pour style aligné)
===================================================== */
#shop-popup .search {
  position: relative;
  margin: 8px 0 12px;
}

#shop-popup .search #search-popup {
  width: 100%;
  height: 42px;
  padding: 10px 14px 10px 40px;
  border: 1px solid var(--border);
  background-color: var(--bg);
  color: var(--text);
  border-radius: 10px;
  outline: none;
  font-size: 14px;
  transition: border-color .2s ease, box-shadow .2s ease, background-color .2s ease;
  box-shadow: var(--shadow);
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='18' height='18' viewBox='0 0 24 24' fill='none' stroke='%23909aa3' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Ccircle cx='11' cy='11' r='8'/%3E%3Cpath d='m21 21-4.3-4.3'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: 12px center;
  background-size: 18px 18px;
}

#shop-popup .search #search-popup::placeholder {
  color: var(--text-muted);
}

#shop-popup .search #search-popup:focus {
  border-color: var(--ring);
  box-shadow: 0 0 0 3px color-mix(in srgb, var(--ring) 18%, transparent);
}

/* =====================================================
   Bottom Menu - base + hide/show + drag fluide
===================================================== */
.bottom-menu {
  position: fixed;
  left: 0; right: 0; bottom: 0;
  transform: translateY(0);
  transition: transform .25s ease;
  will-change: transform;
  z-index: 50;
  padding-bottom: max(8px, env(safe-area-inset-bottom));
  /* Option: background blur si besoin
  backdrop-filter: saturate(120%) blur(6px); 
  */
}

/* Caché, mais garde une partie visible pour le “grabber” */
.bottom-menu.is-hidden {
  transform: translateY(calc(100% - (var(--edge-visible) + env(safe-area-inset-bottom))));
  pointer-events: none; /* important: pas de tap direct sur le menu caché */
}

/* Pendant le drag: pas de transition pour suivre le doigt en temps réel */
.bottom-menu.dragging {
  transition: none !important;
}

/* Grabber visuel (barre en haut du menu) */
.bottom-menu::before {
  content: "";
  position: absolute;
  top: -8px; left: 50%;
  width: 40px; height: 4px;
  margin-left: -20px;
  border-radius: 999px;
  background: rgba(0,0,0,.25);
  box-shadow: 0 1px 2px rgba(0,0,0,.2);
  pointer-events: none;
}

/* Zone “edge” pour capter le swipe up quand le menu est caché */
.touch-edge-bottom {
  position: fixed;
  left: 0; right: 0; bottom: 0;
  height: calc(24px + env(safe-area-inset-bottom));
  z-index: 60; /* au-dessus du menu caché */
}

/* Si vous avez des boutons dans .bottom-menu, vous pouvez ajouter un petit style */
.bottom-menu .menu-btn {
  /* Exemple simple, adaptez selon votre design existant */
  background: transparent;
  border: none;
  color: inherit;
}

/* =====================================================
   Dark mode (prefers-color-scheme et via data-theme)
===================================================== */
@media (prefers-color-scheme: dark) {
  :root {
    --bg: #14161a;
    --text: #e6e6e6;
    --border: rgba(255,255,255,0.08);
    --border-hover: rgba(255,255,255,0.14);
    --shadow: var(--shadow-dark);
  }

  .bottom-menu::before {
    background: rgba(255,255,255,.35);
  }

  #shop .search #search,
  #shop-popup .search #search-popup {
    background-color: var(--bg);
    color: var(--text);
    border-color: var(--border);
  }

  #shop .search #search:focus,
  #shop-popup .search #search-popup:focus {
    border-color: var(--ring-dark);
    box-shadow: 0 0 0 3px color-mix(in srgb, var(--ring-dark) 18%, transparent);
  }

  /* Icône loupe plus claire en dark */
  #shop .search #search,
  #shop-popup .search #search-popup {
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='18' height='18' viewBox='0 0 24 24' fill='none' stroke='%23a6b0bb' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Ccircle cx='11' cy='11' r='8'/%3E%3Cpath d='m21 21-4.3-4.3'/%3E%3C/svg%3E");
  }
}

/* Dark mode via attribut data-theme="dark" (si vous l’utilisez) */
body[data-theme="dark"] {
  --bg: #14161a;
  --text: #e6e6e6;
  --border: rgba(255,255,255,0.08);
  --border-hover: rgba(255,255,255,0.14);
  --shadow: var(--shadow-dark);
}

body[data-theme="dark"] .bottom-menu::before {
  background: rgba(255,255,255,.35);
}

body[data-theme="dark"] #shop .search #search,
body[data-theme="dark"] #shop-popup .search #search-popup {
  background-color: var(--bg);
  color: var(--text);
  border-color: var(--border);
}

body[data-theme="dark"] #shop .search #search:focus,
body[data-theme="dark"] #shop-popup .search #search-popup:focus {
  border-color: var(--ring-dark);
  box-shadow: 0 0 0 3px color-mix(in srgb, var(--ring-dark) 18%, transparent);
}

body[data-theme="dark"] #shop .search #search,
body[data-theme="dark"] #shop-popup .search #search-popup {
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='18' height='18' viewBox='0 0 24 24' fill='none' stroke='%23a6b0bb' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Ccircle cx='11' cy='11' r='8'/%3E%3Cpath d='m21 21-4.3-4.3'/%3E%3C/svg%3E");
}


  /* Variables & Utils
===================================================== */
:root{
  /* Colors */
  --ring: #3b82f6;
  --ring-dark: #60a5fa;
  --text: #111111;
  --text-muted: #8a96a3;
  --bg: #ffffff;
  --border: #cfd6df;

  /* Dark */
  --bg-dark: #0f1216;
  --text-dark: #f5f7fa;
  --border-dark: rgba(255,255,255,.14);

  /* Bottom menu height (ampiasaina amin'ny padding-bottom an'ny #shop) */
  --bottom-menu-h: 64px;

  /* Tiles (menu colorés) */
  --tile-home: #2563eb;
  --tile-shop: #16a34a;
  --tile-param: #f59e0b;
  --tile-shadow: 0 6px 16px rgba(0,0,0,.18);
  --tile-shadow-hover: 0 10px 22px rgba(0,0,0,.22);
  --tile-shadow-active: 0 3px 10px rgba(0,0,0,.28);

  /* Grabber visible height (rehefa afenina ny bottom menu) */
  --edge-visible: 18px;
}

.sr-only,.visually-hidden{
  position:absolute!important;width:1px;height:1px;margin:-1px;padding:0;overflow:hidden;clip:rect(0 0 0 0);white-space:nowrap;border:0;
}

/* =====================================================
   Base/Layout
===================================================== */
html,body{height:100%;}
body{color:var(--text);background:var(--bg);font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif;}

/* Sections default */
section{display:block;}

/* =====================================================
   SHOP: scrollable section + layout
===================================================== */
#shop{
  position:relative;
  min-height:100vh;
  overflow-y:auto;
  -webkit-overflow-scrolling:touch;
  overscroll-behavior:contain;
  padding-bottom:calc(var(--bottom-menu-h) + env(safe-area-inset-bottom) + 12px);
}

/* Tools toggle (corner gauche, absolute, tsy sticky) */
#shop #shopToolsToggle{
  position:absolute;
  top:8px;left:10px;
  z-index:15;
  display:inline-flex;align-items:center;justify-content:center;
  width:40px;height:40px;border-radius:10px;border:none;cursor:pointer;
  color:#fff;
  background:linear-gradient(180deg, color-mix(in srgb, #334155 92%, #fff 8%), #334155);
  box-shadow:0 8px 18px rgba(0,0,0,.25);
  touch-action:manipulation;
}
#shop #shopToolsToggle i{font-size:16px;}
#shop.tools-open #shopToolsToggle i{transform:rotate(90deg);transition:transform .2s ease;}

/* Tools wrapper: collapsed by default, animated open */
#shop #shop-tools{
  overflow:clip;
  max-height:0;
  opacity:0;
  transform:translateY(-6px);
  transition:max-height .28s ease,opacity .18s ease,transform .28s ease;
  pointer-events:none;
  margin:0 10px;
}
/* Open state (ampiasain'ny JS: #shop.tools-open) */
#shop.tools-open #shop-tools{
  max-height:520px;
  opacity:1;
  transform:translateY(0);
  pointer-events:auto;
  margin-top:46px;   /* tsy hikasika ny tools button */
  margin-bottom:8px;
}

/* Topbar: titre afovoany, actions any amin'ny corner droite */
#shop .shop-topbar{
  display:grid;
  grid-template-columns:1fr auto 1fr;
  align-items:center;
  min-height:52px;
  padding:8px 4px;
}
#shop .shop-title{
  grid-column:2;justify-self:center;
  margin:0;font-size:18px;font-weight:800;
  white-space:nowrap;overflow:hidden;text-overflow:ellipsis;
}
#shop .shop-actions{
  grid-column:3;justify-self:end;
  display:inline-flex;align-items:center;gap:8px;
  margin-right:max(2px, env(safe-area-inset-right));
}
#shop .shop-actions .icon-btn{
  width:36px;height:36px;display:inline-flex;align-items:center;justify-content:center;
  border:none;border-radius:10px;cursor:pointer;color:#fff;
  background:linear-gradient(180deg, color-mix(in srgb, #2563eb 92%, #fff 8%), #2563eb);
  box-shadow:0 6px 16px rgba(0,0,0,.18);
}
#shop .add-product-btn,
#btnAddProduct{
  height:36px;display:inline-flex;align-items:center;gap:8px;
  border:none;border-radius:10px;padding:0 12px;color:#fff;font-weight:700;
  background:linear-gradient(180deg, color-mix(in srgb, #16a34a 92%, #fff 8%), #16a34a);
  box-shadow:0 6px 16px rgba(0,0,0,.18);
}

/* Toolbar container (Search + Filters) */
#shop .shop-toolbar{display:grid;gap:10px;margin:6px 0 10px;}

/* Search bar clean */
#shop .search{position:relative;}
#shop .search #search{
  width:100%;height:40px;
  padding:8px 12px 8px 38px;
  border:1px solid var(--border);
  background-color:#ffffff !important;
  color:#111111 !important;
  -webkit-text-fill-color:#111111 !important;
  caret-color:#111111;
  border-radius:999px;outline:none;font-size:14px;
  transition:border-color .2s ease, box-shadow .2s ease;
  box-shadow:0 1px 2px rgba(0,0,0,.04);
  background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='18' height='18' viewBox='0 0 24 24' fill='none' stroke='%23909aa3' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Ccircle cx='11' cy='11' r='8'/%3E%3Cpath d='m21 21-4.3-4.3'/%3E%3C/svg%3E");
  background-repeat:no-repeat;background-position:12px center;background-size:18px 18px;
  appearance:none;-webkit-appearance:none;
}
#shop .search #search::placeholder{color:var(--text-muted) !important;}
#shop .search #search:focus{border-color:var(--ring);box-shadow:0 0 0 3px rgba(59,130,246,.18);}

/* Filters: chips compact scrollable */
#shop .filters{display:flex;gap:8px;overflow-x:auto;padding-bottom:2px;-webkit-overflow-scrolling:touch;scrollbar-width:thin;}
#shop .filters .filter-btn{
  flex:0 0 auto;height:34px;padding:0 12px;
  border:1px solid rgba(0,0,0,.08);
  background:#f7f9fc;color:#111;
  border-radius:999px;font-size:13px;font-weight:600;cursor:pointer;
  transition:background .15s ease, color .15s ease, border-color .15s ease, transform .1s ease;
}
#shop .filters .filter-btn:hover{background:#eef3fb;border-color:rgba(0,0,0,.12);}
#shop .filters .filter-btn.active{
  background:#2563eb;color:#fff;border-color:#2563eb;
  box-shadow:0 4px 10px rgba(37,99,235,.25);
  transform:translateY(-2px);
}

/* Products list spacing */
.products-section{padding:4px 10px 10px;}

/* =====================================================
   Bottom Menu — Colorful tiles + drag/hide support
===================================================== */
.bottom-menu{
  position:fixed;left:0;right:0;bottom:0;
  z-index:50;
  display:grid;grid-template-columns:repeat(3,1fr);gap:12px;
  padding:10px max(12px, env(safe-area-inset-left)) calc(10px + env(safe-area-inset-bottom)) max(12px, env(safe-area-inset-right));
  transform:translateY(0);
  transition:transform .25s ease;will-change:transform;
}
.bottom-menu.is-hidden{
  transform:translateY(calc(100% - (var(--edge-visible) + env(safe-area-inset-bottom))));
  pointer-events:none;
}
.bottom-menu.dragging{transition:none !important;}
.bottom-menu::before{
  content:"";position:absolute;top:-8px;left:50%;
  width:40px;height:4px;margin-left:-20px;border-radius:999px;
  background:rgba(0,0,0,.25);box-shadow:0 1px 2px rgba(0,0,0,.2);pointer-events:none;
}

/* Menu buttons style (Windows-like square tiles) */
.bottom-menu .menu-btn{
  display:inline-flex;align-items:center;justify-content:center;gap:8px;
  height:54px;padding:0 14px;border:none;border-radius:10px;color:#fff;font-size:13px;font-weight:600;
  cursor:pointer;user-select:none;transition:transform .12s ease,box-shadow .12s ease,filter .12s ease,opacity .12s ease;
  box-shadow:var(--tile-shadow);background:#444;
}
.bottom-menu .menu-btn i{font-size:16px;}
.bottom-menu .menu-home{background:linear-gradient(180deg, color-mix(in srgb, var(--tile-home) 92%, #fff 8%), var(--tile-home));}
.bottom-menu .menu-shop{background:linear-gradient(180deg, color-mix(in srgb, var(--tile-shop) 92%, #fff 8%), var(--tile-shop));}
.bottom-menu .menu-param{background:linear-gradient(180deg, color-mix(in srgb, var(--tile-param) 92%, #fff 8%), var(--tile-param));}
.bottom-menu .menu-btn:hover{transform:translateY(-2px);box-shadow:var(--tile-shadow-hover);filter:brightness(1.02);}
.bottom-menu .menu-btn:active{transform:translateY(0);box-shadow:var(--tile-shadow-active);filter:brightness(.98);}
.bottom-menu .menu-btn.active{transform:translateY(-3px);box-shadow:0 10px 24px rgba(0,0,0,.26);outline:2px solid color-mix(in srgb, #ffffff 30%, transparent);outline-offset:-2px;}

/* Edge swipe zone (hanokatra raha miafina) — azo avela na esorina raha JS no mamorona azy */
.touch-edge-bottom{
  position:fixed;left:0;right:0;bottom:0;height:calc(24px + env(safe-area-inset-bottom));z-index:60;
}

/* =====================================================
   Dark mode (prefers-color-scheme + data-theme)
===================================================== */
@media (prefers-color-scheme: dark){
  :root{
    --bg:#0f1216; --text:#f5f7fa; --border:var(--border-dark);
    --tile-shadow:0 6px 16px rgba(0,0,0,.5);
    --tile-shadow-hover:0 10px 22px rgba(0,0,0,.6);
    --tile-shadow-active:0 3px 10px rgba(0,0,0,.7);
  }
  .bottom-menu::before{background:rgba(255,255,255,.35);}
  #shop .search #search{
    background-color:var(--bg) !important;color:var(--text) !important;
    -webkit-text-fill-color:var(--text) !important;border-color:var(--border) !important;
  }
  #shop .filters .filter-btn{background:#171a20;color:#e6e6e6;border-color:rgba(255,255,255,.08);}
  #shop .filters .filter-btn:hover{background:#1c2129;border-color:rgba(255,255,255,.14);}
}

/* Explicit dark via attribute */
body[data-theme="dark"]{
  --bg:#0f1216; --text:#f5f7fa; --border:var(--border-dark);
}
body[data-theme="dark"] .bottom-menu::before{background:rgba(255,255,255,.35);}
body[data-theme="dark"] #shop .search #search{
  background-color:var(--bg) !important;color:var(--text) !important;-webkit-text-fill-color:var(--text) !important;border-color:var(--border) !important;
}
body[data-theme="dark"] #shop .filters .filter-btn{background:#171a20;color:#e6e6e6;border-color:rgba(255,255,255,.08);}
body[data-theme="dark"] #shop .filters .filter-btn:hover{background:#1c2129;border-color:rgba(255,255,255,.14);}

#shop { position: relative; overflow-y: auto; }

/* Bouton outils: corner gauche, tsy sticky, ambony z-index, clickable */
#shop #shopToolsToggle {
  position: absolute;
  top: 8px;
  left: 10px;
  z-index: 2000;           /* avo mba tsy ho sarona */
  pointer-events: auto;    /* antoka ho clickable */
}

/* Tools wrapper: miafina default (raha tsy efa ao amin'ny HTML inline) */
#shop #shop-tools {
  overflow: clip;
  max-height: 0;
  opacity: 0;
  transform: translateY(-6px);
  pointer-events: none;
}

/* Raha tianao ihany koa ny variant CSS-driven */
#shop.tools-open #shop-tools {
  max-height: 520px;
  opacity: 1;
  transform: translateY(0);
  pointer-events: auto;
  margin-top: 46px; /* mba tsy hikasika ny bouton */
  margin-bottom: 8px;
}
