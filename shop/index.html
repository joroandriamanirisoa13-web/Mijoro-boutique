<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Mijoro Boutique — Gestion Produits</title>

  <!-- STYLE PRINCIPAL -->
  <link rel="stylesheet" href="style.css" />

  <!-- SUPABASE -->
  <script src="https://unpkg.com/@supabase/supabase-js@2.39.7/dist/umd/supabase.min.js"></script>
</head>
<body>
  <!-- 🔝 BARRE DU HAUT -->
  <header class="topbar">
    <h1>Mijoro Boutique</h1>
    <div class="actions">
      <button id="login-btn" class="btn primary">Se connecter</button>
      <button id="logout-btn" class="btn danger" style="display:none;">Se déconnecter</button>
    </div>
  </header>

  <!-- 🔍 FILTRES -->
  <section class="filters">
    <select id="filter-tag" class="search">
      <option value="all">Tous les produits</option>
      <option value="mode">Mode</option>
      <option value="accessoire">Accessoires</option>
      <option value="tech">Technologie</option>
      <option value="maison">Maison</option>
    </select>
  </section>

  <!-- 🧱 LISTE DES PRODUITS -->
  <main id="products-list" class="grid">
    <p>Chargement des produits...</p>
  </main>

  <!-- ➕ BOUTON AJOUTER PRODUIT -->
  <div class="add-product-bar">
    <button id="add-product-btn" class="btn primary">+ Ajouter un produit</button>
  </div>

  <!-- 🪪 MODAL LOGIN -->
  <dialog id="login-modal" class="modal">
    <div class="modal-header">
      <h2>Connexion</h2>
      <button id="close-login" class="icon-btn">✖</button>
    </div>
    <div class="modal-body">
      <form id="login-form">
        <label>Email
          <input type="email" id="login-email" required />
        </label>
        <label>Mot de passe
          <input type="password" id="login-password" required />
        </label>
        <div class="modal-footer">
          <button type="submit" class="btn primary">Connexion</button>
        </div>
      </form>
    </div>
  </dialog>

  <!-- 🧾 MODAL AJOUT PRODUIT -->
  <dialog id="product-modal" class="modal">
    <div class="modal-header">
      <h2>Ajouter un produit</h2>
      <button id="close-modal" class="icon-btn">✖</button>
    </div>
    <div class="modal-body">
      <form id="product-form" class="form-grid">
        <label>
          Nom du produit
          <input type="text" id="name" required />
        </label>
        <label>
          Prix (Ar)
          <input type="number" id="price" required />
        </label>
        <label>
          Catégorie / Tag
          <input type="text" id="tag" placeholder="ex: mode, tech..." />
        </label>
        <label class="full">
          Lien Preview (image, vidéo ou PDF)
          <input type="url" id="preview" placeholder="https://..." />
        </label>
        <label class="full">
          Description
          <textarea id="description" rows="3"></textarea>
        </label>
        <div class="modal-footer">
          <button type="submit" class="btn primary">💾 Enregistrer</button>
          <button type="button" id="cancel-product" class="btn">Annuler</button>
        </div>
      </form>
    </div>
  </dialog>

  <!-- ⚙️ SCRIPT PRINCIPAL -->
  <script src="app-secure.js"></script>
</body>
</html>